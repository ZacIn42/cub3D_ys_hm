# mimilibxの使い方

## mlx_init

mlx_init() の詳細
目的:
mlx_init() は、MiniLibXライブラリがXサーバーと接続し、グラフィック関連の操作を行うための必要なリソースを準備するために使用されます。mlx_init() を呼び出すと、Xサーバーへの接続が確立され、ウィンドウの作成や画像の処理、イベントの管理などのグラフィックス操作が可能になります。

戻り値:
mlx_init() は、MiniLibXライブラリを操作するためのハンドル（ポインタ）を返します。このハンドルは、ライブラリ内の他の関数を呼び出す際に必要となります。このポインタはMiniLibX内の全体的な状態を保持し、後続の関数に渡すことで一貫した操作が可能になります。

内部での動作:

mlx_init() が呼び出されると、内部でXサーバーへの接続が確立されます。これにより、X Window Systemを使用してウィンドウの作成や描画操作が可能になります。
必要なリソースや構造体が初期化され、次に呼び出される mlx_new_window() や mlx_new_image() などの関数を使用できるようになります。
エラーハンドリング:
mlx_init() が NULL を返した場合、初期化に失敗したことを意味します。これは通常、Xサーバーが起動していないか、接続できない場合に発生します。この場合、プログラムは適切なエラーハンドリングを行う必要があります。

Xサーバー（X Server）とは、UNIX系のオペレーティングシステム（Linux、BSDなど）で使用される、グラフィカルユーザーインターフェース（GUI）を提供するシステムの一部です。具体的には、X Window Systemの一部であり、ディスプレイ、キーボード、マウスなどの入出力デバイスを管理し、アプリケーションにこれらのデバイスへのアクセスを提供します。

## mlx_new_window

mlx_new_window の第3引数はウィンドウの高さを指定するパラメータです。具体的には、ウィンドウの縦のピクセル数を指定します。

第1引数: data.mlx - MiniLibX ライブラリの初期化後に得られるハンドル。
第2引数: WIDTH - ウィンドウの横幅（ピクセル数）。
第3引数: HEIGHT - ウィンドウの高さ（ピクセル数）。
第4引数: "MiniLibX Sample" - ウィンドウのタイトル。

## mlx_new_image

mlx_new_image 関数は、MiniLibX（Mini Library for X）で新しい画像（イメージ）を作成するための関数です。この関数を使用することで、指定したサイズのオフスクリーンバッファに描画を行うことができ、その後この画像をウィンドウに表示することができます。

mlx_new_image の詳細
目的:
mlx_new_image は、指定された幅（width）と高さ（height）を持つ新しい空の画像を作成します。この画像はオフスクリーンバッファとして機能し、ピクセル単位での描画操作が可能です。この画像は、直接ウィンドウに描画するのではなく、まずメモリ上に描画し、その後にウィンドウに表示するために使用されます。

mlx_ptr: mlx_init で取得した MiniLibX のハンドル（ポインタ）。ライブラリの状態を管理するために必要です。
width: 画像の幅（ピクセル数）。作成する画像の横幅を指定します。
height: 画像の高さ（ピクセル数）。作成する画像の縦の高さを指定します。
戻り値:

mlx_new_image は、新しく作成された画像のハンドル（ポインタ）を返します。このポインタは後続の操作（描画、ウィンドウへの表示など）に使用されます。
失敗した場合には、NULL が返される可能性があります。この場合、画像の作成が失敗したことを意味します。

## mlx_get_data_addr
mlx_get_data_addr 関数は、MiniLibX で作成した画像のピクセルデータにアクセスするためのアドレスを取得するために使用されます。この関数を使うことで、画像のバッファに直接アクセスし、ピクセルごとの操作を行うことが可能になります。

引数
img_ptr:

mlx_new_image で作成した画像のポインタ（ハンドル）。
このポインタを使って画像のデータにアクセスします。
bits_per_pixel:

画像の色深度（1ピクセルあたりのビット数）を格納するためのポインタ。
通常、24（RGB各8ビット）や32（RGBA各8ビット）などが設定されます。
size_line:

1行分の画像データが占めるバイト数を格納するためのポインタ。
例えば、画像の幅が800ピクセルであり、各ピクセルが4バイトで表されている場合、size_line は 800 * 4 = 3200 となります。
endian:

ピクセルデータのエンディアン（バイトオーダー）を格納するためのポインタ。
0 の場合はリトルエンディアン、1 の場合はビッグエンディアンを意味します。これはピクセルデータのバイト順序がどうなっているかを示します。
戻り値
char *:
画像データの先頭アドレスを指すポインタを返します。このポインタを使用して、直接画像のピクセルデータにアクセスし、編集や操作を行うことができます。

bits_per_pixel:
何を意味するか:
これは「1つの点（ピクセル）」がどれだけの情報を持っているかを示しています。
たとえ話:
例えば、絵を描くときに使う色鉛筆の数のようなものです。色鉛筆が多ければ多いほど、もっと多くの色を使って絵を描けます。この数字が大きいほど、画像で使える色が多くなります。
size_line:
何を意味するか:
これは「画像の横1行分」がメモリの中でどれだけのスペースを使っているかを示しています。
たとえ話:
画像を作るために横に並べるブロックを想像してください。この数字は、横一列に並べたブロック全体がどれくらいの大きさになるかを表しています。
endian:
何を意味するか:
これは「色の情報がどの順番で並べられているか」を示しています。
たとえ話:
本を読むときに、左から右に読むか、右から左に読むか、そんな違いのようなものです。ここでは、コンピュータがデータをどう読むかが関係しています。

mlx_get_data_addr の役割と使い方
ピクセル操作:
mlx_get_data_addr は、画像のピクセルデータに直接アクセスするための入り口を提供します。これにより、画像に対してピクセル単位での操作が可能となります。

画像データの構造:
画像データは1次元配列としてメモリ上に格納されており、各ピクセルは連続したメモリアドレスに配置されます。bits_per_pixel や size_line を使用して、特定のピクセルのアドレスを計算し、そのピクセルの色を設定したり取得したりできます。

エンディアンの扱い:
エンディアンは、ピクセルデータのバイトオーダーを示します。例えば、リトルエンディアンの場合、色のデータが逆順にメモリに格納されるため、この点を考慮してデータを操作する必要があります。

## mlx_put_image_to_window

mlx_put_image_to_window 関数は、MiniLibXを使用してメモリ上に作成した画像をウィンドウに表示するために使用される関数です。この関数を使うことで、オフスクリーンバッファに描画された内容を実際のウィンドウに反映させることができます。

mlx_ptr:

mlx_init で取得した MiniLibX のハンドル（ポインタ）。
MiniLibXライブラリの内部状態を管理するために必要です。
win_ptr:

mlx_new_window で作成したウィンドウのハンドル（ポインタ）。
画像を表示するウィンドウを指定します。
img_ptr:

mlx_new_image で作成した画像のハンドル（ポインタ）。
表示したい画像データを指します。
x, y:

画像をウィンドウ内のどの位置に表示するかを指定します。
(0, 0) はウィンドウの左上隅を意味します。これにより、画像がウィンドウのどこに表示されるかを決定します。
戻り値
int:
正常に画像がウィンドウに描画されると、0 を返します。エラーが発生した場合には別の値が返される可能性がありますが、通常はエラーハンドリングはあまり行われません。

## mlx_key_hook
引数
win_ptr:

mlx_new_window で作成したウィンドウのハンドル（ポインタ）。
キー入力イベントを監視する対象のウィンドウを指定します。
funct_ptr:

キーが押されたときに呼び出されるコールバック関数のポインタ。
この関数は、キー入力イベントが発生した際に自動的に呼び出されます。
param:

コールバック関数に渡される任意のデータ（通常は構造体やポインタ）。
例えば、プログラムの状態を保持する構造体へのポインタなどが渡されることが多いです。

## mlx_loop
mlx_loop 関数は、MiniLibXを使用して作成されたプログラムにおいて、メインのイベントループを開始するために使用される非常に重要な関数です。この関数が呼び出されると、プログラムは無限ループに入り、ウィンドウやその他のイベント（例えばキーボードやマウスの入力）を監視し続けます。
mlx_ptr:
mlx_init で初期化された MiniLibX のハンドル（ポインタ）。このポインタを使って、MiniLibX の内部状態を管理し、イベントループを制御します。
戻り値
mlx_loop 関数は、通常戻り値を返しません。プログラムが終了するまで（例えば、ウィンドウが閉じられるか、明示的にプログラムが終了するまで）ループを続けます。
このコードが呼び出されると、プログラムはイベントループに入り、ウィンドウやキーボード、マウスなどのイベントを待ち受ける状態になります。

mlx_loop の役割
イベント監視:

mlx_loop は、ウィンドウの状態を常に監視し続けます。例えば、ウィンドウが閉じられる、キーが押される、マウスが動かされるなどのイベントが発生した場合に、それに対応するコールバック関数が呼び出されます。mlx_clear_window(data->mlx, data->win);
無限ループ:

mlx_loop は無限ループに入るため、プログラムが終了するか、明示的に終了されるまで続きます。これにより、リアルタイムでのユーザー入力やウィンドウの描画更新などが可能になります。
インタラクティブなアプリケーションの基盤:

mlx_loop を使用することで、インタラクティブなグラフィカルアプリケーションが構築できます。ゲームやグラフィカルエディタなどのアプリケーションは、このイベントループを使用してユーザーとのやり取りを実現します。

## mlx_clear_window

mlx_clear_window 関数は、MiniLibX でウィンドウの内容をクリアする（つまり、すべてを消去して背景色で塗りつぶす）ために使用されます。この関数を使用することで、ウィンドウ内に表示されているすべてのグラフィック要素が消去され、ウィンドウは初期状態に戻ります。
引数
mlx_ptr:

mlx_init で初期化された MiniLibX のハンドル（ポインタ）。
MiniLibXの内部状態を管理し、ウィンドウや画像操作を行うために使用されます。
win_ptr:

mlx_new_window で作成したウィンドウのハンドル（ポインタ）。
クリアしたいウィンドウを指定します。このウィンドウがクリアされます。
戻り値
int:
この関数は通常 0 を返しますが、実際に戻り値が利用されることはほとんどありません。